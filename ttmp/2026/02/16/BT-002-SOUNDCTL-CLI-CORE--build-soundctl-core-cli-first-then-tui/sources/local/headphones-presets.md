## Screen 5: Presets Tab

```
â”Œâ”€ SoundCtl â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  Devices     Sinks     Profiles     â–¸ Presets           â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ Saved Presets â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â˜… Music Mode                          [active] â”‚    â”‚
â”‚  â”‚    XM5â†’A2DP  Master:80%  Route:allâ†’XM5          â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚    Video Call                                    â”‚    â”‚
â”‚  â”‚    XM5â†’HSP/HFP  Master:60%  Discordâ†’XM5         â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚    Speakers + Low                                â”‚    â”‚
â”‚  â”‚    XM5â†’Off  Master:40%  Route:allâ†’Built-in       â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚    Late Night                                    â”‚    â”‚
â”‚  â”‚    XM5â†’A2DP  Master:25%  Alerts:0%               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  enter apply  n new  e edit  d delete  c clone  q quit  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Screen 6: Create/Edit Preset

```
â”Œâ”€ SoundCtl â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  â”Œâ”€ Edit Preset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚  Name: [ Late Night Gaming___________]           â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚  â”€â”€ Profiles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚    â”‚
â”‚  â”‚  Sony WH-1000XM5:   â—€ A2DP Sink â–¶               â”‚    â”‚
â”‚  â”‚  Built-in Audio:     â—€ Off â–¶                     â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚  â”€â”€ Volumes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚    â”‚
â”‚  â”‚  Master  â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  25%            â”‚    â”‚
â”‚  â”‚  Media   â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘  90%            â”‚    â”‚
â”‚  â”‚  Alerts  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%   ğŸ”‡       â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚  â”€â”€ App Routing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚    â”‚
â”‚  â”‚  Default sink:  Sony WH-1000XM5                  â”‚    â”‚
â”‚  â”‚  + Firefox      â—€ follow default â–¶               â”‚    â”‚
â”‚  â”‚  + Discord      â—€ follow default â–¶               â”‚    â”‚
â”‚  â”‚  + Spotify      â—€ follow default â–¶               â”‚    â”‚
â”‚  â”‚                                                  â”‚    â”‚
â”‚  â”‚        [ ğŸ’¾ Save ]          [ Cancel ]            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  tab next-field  â†â†’ cycle option  â†‘â†“ navigate          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Screen 7: Apply Confirmation

```
â”Œâ”€ SoundCtl â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  Devices     Sinks     Profiles     â–¸ Presets           â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ Saved Presets â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  â˜… Music Mode                   [active] â”‚          â”‚
â”‚  â”‚  â”Œâ”€ Apply "Video Call"? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚
â”‚  â”‚  â”‚                                    â”‚  â”‚          â”‚
â”‚  â”‚  â”‚  Changes:                          â”‚  â”‚          â”‚
â”‚  â”‚  â”‚   XM5 profile  A2DP â†’ HSP/HFP     â”‚  â”‚          â”‚
â”‚  â”‚  â”‚   Master vol    80% â†’ 60%          â”‚  â”‚          â”‚
â”‚  â”‚  â”‚   Firefox      XM5 â†’ Built-in      â”‚  â”‚          â”‚
â”‚  â”‚  â”‚                                    â”‚  â”‚          â”‚
â”‚  â”‚  â”‚      [ Apply ]    [ Cancel ]       â”‚  â”‚          â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚
â”‚  â”‚    Speakers + Low                        â”‚          â”‚
â”‚  â”‚    Late Night                            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                         â”‚
â”‚  âœ“ Preset "Music Mode" applied                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Updated YAML DSL

```yaml
# â”€â”€ New tab added to AppModel â”€â”€
app:
  children:
    tabs:     TabBar          # now 4 tabs
    devices:  DevicesPane
    sinks:    SinksPane
    profiles: ProfilesPane
    presets:  PresetsPane     # â† new
    scanner:  ScanOverlay
    status:   StatusBar

# â”€â”€ Preset Data Structures â”€â”€
types:
  Preset:
    name:           string
    card_profiles:  map[card_id â†’ profile_name]
    volumes:        map[channel_name â†’ {level: int, muted: bool}]
    default_sink:   sink_id
    app_routes:     map[app_name â†’ sink_id | "follow_default"]
    created_at:     time
    updated_at:     time

  PresetDiff:
    changes:  []DiffLine     # {field, from, to}

# â”€â”€ Presets Pane â”€â”€
PresetsPane:
  model:
    presets:       []Preset
    cursor:        int
    active_preset: *string       # name of currently applied preset
    editor:        *PresetEditor # nil when closed
    confirm:       *ConfirmModal # nil when closed
  messages:
    handles:
      - KeyMsg
      - ApplyPresetResultMsg
      - SavePresetResultMsg
      - DeletePresetResultMsg
      - SnapshotCurrentMsg       # captures live state into editor
    emits:
      - ApplyPresetCmd
      - SavePresetCmd
      - DeletePresetCmd
      - OpenEditorMsg
      - CloseEditorMsg
      - OpenConfirmMsg
      - CloseConfirmMsg

PresetEditor:
  model:
    preset:        Preset
    is_new:        bool
    focused_field: enum[name, profiles, volumes, routes, buttons]
    profile_cursors:  map[card_id â†’ int]
    volume_cursor:    int
    route_cursor:     int
  messages:
    handles:
      - KeyMsg
      - SnapshotCurrentMsg     # populates fields from live state
    emits:
      - SavePresetCmd
      - CloseEditorMsg
  interactions:
    name_field:    "text input, printable keys"
    profile_sel:   "â†â†’ cycles through available profiles"
    volume_bars:   "â†â†’ adjusts Â±5%,  m toggles mute"
    route_sel:     "â†â†’ cycles sink or 'follow default'"

ConfirmModal:
  model:
    preset:     Preset
    diff:       PresetDiff
    cursor:     enum[apply, cancel]
  messages:
    handles:  [KeyMsg]
    emits:    [ApplyPresetCmd, CloseConfirmMsg]

# â”€â”€ Apply Preset Command Sequence â”€â”€
ApplyPresetCmd:
  description: "Batch applies all preset settings"
  steps:
    - for card, profile in preset.card_profiles:
        "pactl set-card-profile {card} {profile}"
    - for channel in preset.volumes:
        "pactl set-sink-volume {sink} {level}%"
        "pactl set-sink-mute {sink} {muted}"
    - "pactl set-default-sink {preset.default_sink}"
    - for app, sink in preset.app_routes:
        if sink != "follow_default":
          "pactl move-sink-input {stream_id} {sink}"
  emits: ApplyPresetResultMsg

# â”€â”€ Persistence â”€â”€
persistence:
  file: "$XDG_CONFIG_HOME/soundctl/presets.json"
  commands:
    SavePresetCmd:   "write preset to JSON file"
    DeletePresetCmd: "remove preset from JSON file"
    LoadPresetsCmd:  "read all presets on startup"

# â”€â”€ New Key Bindings â”€â”€
keybindings:
  presets:
    enter:  OpenConfirmMsg        # show diff + confirm
    n:      OpenEditorMsg{new}    # blank editor
    e:      OpenEditorMsg{edit}   # edit selected
    c:      OpenEditorMsg{clone}  # clone selected
    d:      DeletePresetCmd
    S:      SnapshotCurrentMsg    # capture current state as new preset
  editor:
    tab:    NextField
    S-tab:  PrevField
    "â†/â†’":  CycleOption / AdjustVolume
    m:      ToggleMute
    enter:  SavePresetCmd         # on save button
    esc:    CloseEditorMsg
  confirm:
    enter:  ApplyPresetCmd
    esc:    CloseConfirmMsg
    "â†/â†’":  ToggleConfirmCursor
```

The key addition is `S` (Snapshot) â€” it captures your **current live state** (active profiles, volumes, routing) directly into the editor so you can name it and save, rather than building presets from scratch.
